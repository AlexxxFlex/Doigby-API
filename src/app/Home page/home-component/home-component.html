<div class="api-container">
  <h2>Nos Produits</h2>

  <app-list-product
    *ngFor="let categoryId of getCategories()"
    [products]="groupedProducts[categoryId]"
    [categoryName]="getCategoryName(categoryId)"
    (productSelected)="openSizeModal($event)">
  </app-list-product>

  <!-- Modal pour la sélection de taille -->
  <div class="modal-overlay" *ngIf="showSizeModal" (click)="closeSizeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="modal-close" (click)="closeSizeModal()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>

      <div class="modal-header">
        <img [src]="selectedProduct?.image" [alt]="selectedProduct?.name" class="modal-product-image" />
        <div>
          <h3>{{ selectedProduct?.name }}</h3>
          <p class="modal-price">{{ selectedProduct?.price }} €</p>
        </div>
      </div>

      <h4>Choisissez votre taille</h4>
      <div class="size-grid">
        <button 
          *ngFor="let size of sizes" 
          class="size-btn"
          (click)="addToCart(selectedProduct, size)">
          {{ size }}
        </button>
      </div>
    </div>
  </div>
</div>